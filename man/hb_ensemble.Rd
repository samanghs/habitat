% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ensemble.R
\name{hb_ensemble}
\alias{hb_ensemble}
\title{Create Ensemble Map}
\usage{
hb_ensemble(
  rasters,
  method = c("majority", "weighted_majority", "mean", "weighted_mean"),
  threshold = NULL,
  weights = NULL,
  na_rm = TRUE
)
}
\arguments{
\item{rasters}{A list of SpatRaster or RasterLayer objects.}

\item{method}{Character. One of:
\itemize{
\item \code{"majority"} — Majority vote on binarized rasters.
\item \code{"weighted_majority"} — Weighted majority vote on binarized rasters.
\item \code{"mean"} — Unweighted averaging of continuous rasters.
\item \code{"weighted_mean"} — Weighted averaging of continuous rasters.
}}

\item{threshold}{Numeric or \code{NULL}. Threshold for binarizing rasters
(only used with \code{"majority"} or \code{"weighted_majority"}).
If \code{NULL}, defaults to 0.5.}

\item{weights}{Numeric vector of weights (same length as \code{rasters})
used for weighted methods. Ignored for unweighted methods.
If \code{NULL} and a weighted method is chosen, equal weights are assumed.}

\item{na_rm}{Logical. Remove NAs in calculations. Default \code{TRUE}.}
}
\value{
A SpatRaster of the ensemble habitat suitability map.
}
\description{
Combines two or more rasters into a single ensemble map
using either majority-based or statistical methods.
}
\details{
\strong{Majority methods} first binarize input rasters using the given threshold, then:
\itemize{
\item \code{"majority"}: cells with > 50\\% presence across rasters are 1, else 0.
\item \code{"weighted_majority"}: uses weighted sum of presences, applies cutoff of \code{sum(weights)/2}.
}

\strong{Statistical methods} operate directly on continuous values:
\itemize{
\item \code{"mean"}: cellwise unweighted mean.
\item \code{"weighted_mean"}: cellwise weighted mean.
}

All rasters are aligned in CRS, resolution, and extent before computation.
}
\examples{
\dontrun{
library(terra)
r1 <- rast(matrix(runif(100, 0, 1), 10, 10))
r2 <- rast(matrix(runif(100, 0, 1), 10, 10))
r3 <- rast(matrix(runif(100, 0, 1), 10, 10))

# Unweighted mean
ens_mean <- hb_ensemble(list(r1, r2, r3), method = "mean")

# Weighted majority with threshold 0.6
ens_wmaj <- hb_ensemble(list(r1, r2, r3), method = "weighted_majority",
                             threshold = 0.6, weights = c(0.5, 0.3, 0.2))
}

}
